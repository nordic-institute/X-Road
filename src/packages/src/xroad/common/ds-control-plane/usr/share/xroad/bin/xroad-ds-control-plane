#!/bin/bash
. /etc/xroad/services/global.conf

# todo: configure opentelemetry packages XRDDEV-2785
#    -javaagent:/usr/share/xroad/jlib/opentelemetry-javaagent.jar \
# -Dotel.exporter.otlp.protocol=http/protobuf \
#    -Dotel.service.name="$EDC_HOSTNAME-ds-control-plane" \
#    -Dotel.exporter.prometheus.port=9464 \
#    -Dotel.metrics.exporter=prometheus \
#    -Dotel.exporter.otlp.endpoint=http://jaeger:4318 \
exec java -XX:UseSVE=0 \
    -Dserverconf.hibernate.hikari.maximumPoolSize=1 \
    -Xdebug -agentlib:jdwp=transport=dt_socket,address=*:9953,server=y,suspend=n \
    -Xmx256m -jar /usr/share/xroad/jlib/ds-control-plane.jar
