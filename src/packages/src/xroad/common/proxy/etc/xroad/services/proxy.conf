#!/bin/bash

# Please do not change this file! It will be overwritten by updates.
# System specific changes should be added to /etc/xroad/services/local.properties

XROAD_LOG_LEVEL="DEBUG"

. /etc/xroad/services/global.conf

CLIENT_HANDLERS=""
SERVICE_HANDLERS=""

for addon in "${ADDON_PATH}"/proxy/*.conf
do
 if [ -e "${addon}" ]; then
  . "${addon}"
 fi
done

CP="/usr/share/xroad/jlib/proxy.jar"

XROAD_PROXY_PARAMS=" $(/usr/share/xroad/scripts/proxy_memory_helper.sh 'get-default') -XX:MaxMetaspaceSize=140m \
-Djavax.net.ssl.sessionCacheSize=10000 \
-Djava.util.logging.manager=org.jboss.logmanager.LogManager \
-Dquarkus.profile=${XROAD_QUARKUS_PROFILES} $XROAD_PROXY_PARAMS"

# -Dxroad.proxy.clientHandlers=${CLIENT_HANDLERS#?} \
# -Dxroad.proxy.serverServiceHandlers=${SERVICE_HANDLERS#?} \
# -Dxroad.proxy.serverRestServiceHandlers=${SERVICE_REST_HANDLERS#?} \


apply_local_conf XROAD_PROXY_PARAMS
