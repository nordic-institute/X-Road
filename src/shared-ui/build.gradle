import org.siouan.frontendgradleplugin.infrastructure.gradle.RunYarn

configurations {
    yarn { canBeConsumed(true); canBeResolved(false) }
}


tasks.register('yarnBuild', RunYarn) {
    dependsOn installFrontend
    inputs.files(
        'src/',
        'public/',
        'svg-icons/',
        'package.json',
        'yarn.lock',
        'vite.config.js',
        'tsconfig.json',
        fileTree('node_modules') {
            exclude '.cache'
        }
    )
    outputs.dir('dist')
    script = 'run build'
}



clean {
    delete file('dist')
}

assembleFrontend.dependsOn yarnBuild


