/*
 * The MIT License
 *
 * Copyright (c) 2019- Nordic Institute for Interoperability Solutions (NIIS)
 * Copyright (c) 2018 Estonian Information System Authority (RIA),
 * Nordic Institute for Interoperability Solutions (NIIS), Population Register Centre (VRK)
 * Copyright (c) 2015-2017 Estonian Information System Authority (RIA), Population Register Centre (VRK)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

i.v-icon {
  &:focus-visible {
    outline: none;

    &:after {
      content: '';
      width: calc(100% + 4px);
      height: calc(100% + 4px);
      top: -2;
      left: -2px;
      position: absolute;
      border-radius: 4px;
      border: 2px solid rgb(var(--v-theme-accent));
      box-shadow: 0 0 4px 0 rgb(var(--v-theme-accent));
    }
  }
}

.xrd {

  &.v-tab {
    &:after {
      transition: none;
    }
    &:focus-visible:after {
      outline: none;
      z-index: 2;
      opacity: 1;
      border: 1px solid rgb(var(--v-theme-accent));
      box-shadow: 0 0 4px 0 rgb(var(--v-theme-accent)) inset;
    }
  }

  &.v-list-item {
    &:after {
      transition: none;
    }
    &:focus-visible:after {
      outline: none;
      opacity: 1;
      border: 2px solid rgb(var(--v-theme-accent));
      box-shadow: 0 0 4px 0 rgb(var(--v-theme-accent));
    }

    &.rounded-pill:after {
      border-radius: 9999px;
    }
  }

  &.v-btn:not(.v-tab) {

    &.v-btn--variant-outlined:focus-visible:after {
      opacity: 1;
      border: 2px solid rgb(var(--v-theme-accent));
      top: -4px;
      left: -4px;
      width: calc(100% + 8px);
      height: calc(100% + 8px);
      box-shadow: 0 0 4px 0 rgb(var(--v-theme-accent));
    }

    &:not(.v-btn--variant-outlined):focus-visible:after {
      opacity: 1;
      border: 2px solid rgb(var(--v-theme-accent));
      top: -3px;
      left: -3px;
      width: calc(100% + 6px);
      height: calc(100% + 6px);
      box-shadow: 0 0 4px 0 rgb(var(--v-theme-accent));
    }


  }

  &.v-progress-linear {
    .v-progress-linear__background {
      background-color: rgb(var(--v-theme-surface-container))
    }
  }

  &.v-table:not(.v-data-table) {
    background-color: rgb(var(--v-theme-surface-container));

    .v-table__wrapper {

      thead {
        th {
          color: rgb(var(--v-theme-on-surface-variant));
          font-weight: 600;
        }
      }
    }
  }

  &.v-card {
    .v-progress-linear__background {
      background-color: rgb(var(--v-theme-surface-container))
    }
  }

  &.v-data-table {
    background-color: rgb(var(--v-theme-surface-container)) !important;

    .v-data-table__th:focus-visible {
      border-bottom: 1px solid rgb(var(--v-theme-accent));
      box-shadow: 0 5px 4px -5px rgb(var(--v-theme-accent));
      outline: none;
    }

    .v-progress-linear__background {
      background-color: rgb(var(--v-theme-surface-container))
    }

    thead {
      .v-data-table__th {
        color: rgb(var(--v-theme-on-surface-variant)) !important;

        &.v-data-table__th--sorted {
          color: rgb(var(--v-theme-on-surface)) !important;
        }

        .v-data-table-header__sort-icon {
          margin-left: 4px;
        }
      }

      .v-data-table__th:hover {
        @extend .v-data-table__th;

        .v-data-table-header__sort-icon {
          opacity: 1 !important;
        }
      }
    }

    .v-data-table-footer {
      .v-select {
        .v-field__outline {
          border: none;
        }
      }
    }

    tbody {
      .v-data-table__td {
        color: rgb(var(--v-theme-on-surface)) !important;

        &.v-data-table__td--select-row i {
          color: rgb(var(--v-theme-on-surface-variant));
        }
      }
    }
  }

  &.v-text-field,
  &.v-file-input {
    .v-progress-linear__background {
      background-color: rgb(var(--v-theme-surface-container))
    }

    label,
    .v-field__prepend-inner i {
      color: rgb(var(--v-theme-on-surface-variant));
    }

    &:not(.v-input--error) {
      .v-field__outline::before,
      .v-field__outline__start,
      .v-field__outline__end {
        border-color: rgb(var(--v-theme-border-strong));
      }

      .v-field__outline::after,
      .v-field__outline__start,
      .v-field__outline__end {
        border-color: rgb(var(--v-theme-border-bright));
      }

      .v-messages__message {
        color: rgb(var(--v-theme-on-surface));
        opacity: 0.6;
      }
    }

    .v-field--variant-outlined.v-field--active .v-field__overlay {
      background-color: rgb(var(--v-theme-surface-container));
      opacity: 1;
    }

    .v-field--variant-outlined .v-field__overlay {
      background-color: rgb(var(--v-theme-surface-container));
      opacity: .4;
    }
  }

  &.v-select,
  &.v-autocomplete,
  &.v-combobox {
    label,
    .v-field__prepend-inner i,
    .v-field__append-inner i {
      color: rgb(var(--v-theme-on-surface-variant));
    }

    &:not(.v-input--error) {
      .v-field__outline::before {
        border-color: rgb(var(--v-theme-border-strong));
      }

      .v-field__outline::after {
        border-color: rgb(var(--v-theme-border-bright));
      }
    }
  }

  &.v-switch.v-switch--inset {

    &:has(input:focus-visible).v-input--focused .v-switch__track:after {
      content: '';
      position: absolute;
      width: calc(100% + 6px);
      height: calc(100% + 6px);
      top: -3px;
      left: -3px;

      box-shadow: 0 0 4px 0 rgb(var(--v-theme-accent));
      border: 2px solid rgb(var(--v-theme-accent));
      border-radius: 9999px
    }

    .v-switch__track {
      position: relative;
      border: 2px solid rgb(var(--v-theme-secondary));
    }

    .v-switch__thumb.v-switch__thumb--filled {
      background: rgb(var(--v-theme-secondary));

      i::before {
        color: rgb(var(--v-theme-on-secondary));
        font-size: 16px;
      }
    }


    &:has(input[checked]) {
      .v-switch__track {
        border: none;
        background: rgb(var(--v-theme-primary));
        opacity: 1;
      }

      .v-switch__thumb.v-switch__thumb--filled {
        background: rgb(var(--v-theme-on-primary));

        i::before {
          color: rgb(var(--v-theme-primary));
        }
      }
    }
  }

  &.v-checkbox,
  &.v-checkbox-btn,
  &.v-radio {

    &:has(input:focus-visible).v-selection-control--focused {

      &:after {
        content: '';
        position: absolute;
        border-radius: 4px;
        border: 2px solid rgb(var(--v-theme-accent));
        top: -3px;
        left: -3px;
        width: calc(100% + 6px);
        height: calc(100% + 6px);
        box-shadow: 0 0 4px 0 rgb(var(--v-theme-accent));
      }
    }

    i {
      color: rgb(var(--v-theme-on-surface-variant));
    }

    .v-label {
      color: rgb(var(--v-theme-on-surface));
    }
  }

  &.v-radio-group {
    & > .v-input__control > .v-label {
      color: rgb(var(--v-theme-on-surface-variant));
      font-size: 12px;
      line-height: 16px;
      letter-spacing: 0.2px;
    }
  }

}

.v-overlay__content {
  .xrd-select-list {
    background: rgb(var(--v-theme-background)) !important;
    color: rgb(var(--v-theme-on-surface)) !important;
  }
}
