spring:
  application:
    name: edc-data-plane
  output:
    ansi:
      enabled: detect #TODO implementing logging changes to support ansi colors
  main:
    banner-mode: log

server:
  port: 5850

xroad:
  messagelog:
    enabled: true
  common:
    serverconf:
      cache-period: 60
      client-cache-size: 100
      service-cache-size: 1000
      acl-cache-size: 100_000
      hibernate:
        dialect: ee.ria.xroad.common.db.CustomPostgreSQLDialect
        connection.driver_class: org.postgresql.Driver
        connection.url: jdbc:postgresql://127.0.0.1:5432/serverconf
        connection.username: serverconf
        connection.password: ${XROAD_SERVERCONF_PASSWORD}
        hikari.dataSource.currentSchema: serverconf,public
        jdbc.use_streams_for_binary: true
    grpc:
      channel:
        configuration-client:
          host: 127.0.0.1
          port: 4001
          deadline-after: 60000
        signer:
          host: 127.0.0.1
          port: 5560
          deadline-after: 60000

logging:
  level:
    ROOT: INFO
    org.niis.xroad.edc.extension.bridge.config: DEBUG

#EDC configuration
web:
  http:
    port: 9291
    path: /api
    control:
      port: 9292
      path: /control
    public:
      port: 9293
      path: /public
    xroad:
      public:
        port: 9294
        path: /xroad/public
        needClientAuth: true

edc:
  extension:
    spring-bridge:
      serverconf:
        enabled: true
  datasource:
    default:
      url: jdbc:postgresql://127.0.0.1:5432/edc-data-plane
      user: edc-data-plane
      password: ${XROAD_DS_PASSWORD}
  transfer:
    proxy:
      token:
        signer:
          privatekey:
            alias: key-id
        verifier:
          publickey:
            alias: key-id
  dataplane:
    token:
      validation:
        endpoint: https://${EDC_HOSTNAME}:9192/control/token
  dpf:
    selector:
      url: https://${EDC_HOSTNAME}:9192/control/v1/dataplanes
  vault:
    hashicorp:
      url: http://openbao:8200
      token: 00000000-0000-0000-0000-000000000001
  state-machine:
    iteration-wait-millis: 300
