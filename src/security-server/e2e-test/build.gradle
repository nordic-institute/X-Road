dependencies {
    intTestImplementation project(":common:common-int-test")
    intTestImplementation("com.nortal.test:test-automation-assert:$testAutomationFrameworkVersion")
    intTestImplementation("com.nortal.test:test-automation-restassured:$testAutomationFrameworkVersion")

    intTestImplementation("io.github.openfeign:feign-hc5:$openFeignVersion")
}

tasks.register('e2eTest', Test) {
    useJUnitPlatform()

    setDescription("Runs e2e tests.")
    group = 'verification'

    testClassesDirs = sourceSets.intTest.output.classesDirs
    classpath = sourceSets.intTest.runtimeClasspath

    def systemTestArgs = ["-XX:MaxMetaspaceSize=200m"]

    jvmArgs systemTestArgs

    maxHeapSize("256m")

    testLogging {
        showStackTraces(true)
        showExceptions(true)
        showCauses(true)
        showStandardStreams(true)
    }
}
