# Common properties that are injected to all services
quarkus:
  application:
    version: 1.0.0
  vault:
    devservices:
      enabled: false
    url: "${XROAD_SECRET_STORE_SCHEME:http}://${XROAD_SECRET_STORE_HOST:127.0.0.1}:${XROAD_SECRET_STORE_PORT:8200}"
    authentication:
      client-token: "${XROAD_SECRET_STORE_TOKEN}"
    kv-secret-engine-version: 1
    kv-secret-engine-mount-path: xrd-secret
  live-reload:
    enabled: false
  http:
    host-enabled: false
spring:
  main:
    banner-mode: log
  cloud:
    vault:
      enabled: true
      host: ${XROAD_SECRET_STORE_HOST:127.0.0.1}
      port: ${XROAD_SECRET_STORE_PORT:8200}
      scheme: ${XROAD_SECRET_STORE_SCHEME:https}
      token: ${XROAD_SECRET_STORE_TOKEN}
      kv:
        enabled: false

"%containerized":
  quarkus:
    http:
      port: 4099
      host-enabled: true

logging:
  level:
    ROOT: INFO
    org.springframework: INFO

xroad:
  common:
    rpc:
      use-tls: false #TODO disabled until all components are ready
      certificate-provisioning:
        secret-store-pki-path: xrd-pki
        issuance-role-name: xrd-rpc-internal
        common-name: ${XROAD_HOST:localhost}
        ip-subject-alt-names:
          - 127.0.0.1
        ttl-minutes: 720 # 12 hours
        refresh-interval-minutes: 300 # 5 hours
