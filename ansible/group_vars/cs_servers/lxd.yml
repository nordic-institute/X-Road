#CS should support at most 5 instances. Keep port gaps of 5 between each mapping.
container_ports:
  frontend_cs:
    connect: "tcp:127.0.0.1:4000"
    listen: "tcp:0.0.0.0:{{ 3000 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  http_cs:
    connect: "tcp:127.0.0.1:80"
    listen: "tcp:0.0.0.0:{{ 3010 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  https_cs:
    connect: "tcp:127.0.0.1:443"
    listen: "tcp:0.0.0.0:{{ 3015 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  database_cs:
    connect: "tcp:127.0.0.1:5432"
    listen: "tcp:0.0.0.0:{{ 3020 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  registration_cs:
    connect: "tcp:127.0.0.1:4001"
    listen: "tcp:0.0.0.0:{{ 3030 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  management_cs:
    connect: "tcp:127.0.0.1:4002"
    listen: "tcp:0.0.0.0:{{ 3035 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  mailpit_cs:
    connect: "tcp:127.0.0.1:8025"
    listen: "tcp:0.0.0.0:{{ 3089 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  admin_debug:
    connect: "tcp:127.0.0.1:9950"
    listen: "tcp:0.0.0.0:{{ 3090 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  management_debug:
    connect: "tcp:127.0.0.1:9951"
    listen: "tcp:0.0.0.0:{{ 3091 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  registration_debug:
    connect: "tcp:127.0.0.1:9952"
    listen: "tcp:0.0.0.0:{{ 3092 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
  conf_client_debug_cs:
    connect: "tcp:127.0.0.1:9953"
    listen: "tcp:0.0.0.0:{{ 3093 + (groups['cs_servers'].index(inventory_hostname) * 100) }}"
    type: proxy
